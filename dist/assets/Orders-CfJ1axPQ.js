import{c as e,o as s,j as a,b as r,f as t,B as l}from"./index-C3XHl7PL.js";import{r as i}from"./vendor-Df-ZC91g.js";import{C as n,a as c,b as d,c as o}from"./Card-DqtHJJQK.js";import{I as m}from"./Input-BAszwOqE.js";import{B as x}from"./Badge-CewC6kjJ.js";import{S as h}from"./search-DRYqwqby.js";import{P as p}from"./package-uccDexwJ.js";import"./router-BW3qfFDS.js";import"./supabase-C0-OQ20D.js";
/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u=e("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),j=()=>{const[e,j]=i.useState([]),[f,y]=i.useState([]),[g,N]=i.useState(""),[v,b]=i.useState("all"),[C,w]=i.useState(!0);i.useEffect(()=>{S()},[]),i.useEffect(()=>{k()},[e,g,v]);const S=async()=>{try{w(!0);const e=await s.getAll();j(e)}catch(e){console.error("Error loading orders:",e)}finally{w(!1)}},k=()=>{let s=e;g&&(s=s.filter(e=>{var s;return e.customer_name.toLowerCase().includes(g.toLowerCase())||e.customer_email.toLowerCase().includes(g.toLowerCase())||(null==(s=e.equipment)?void 0:s.name.toLowerCase().includes(g.toLowerCase()))})),"all"!==v&&(s=s.filter(e=>e.status===v)),y(s)},z=async(a,r)=>{try{await s.update(a,{status:r}),j(e.map(e=>e.id===a?{...e,status:r}:e))}catch(t){console.error("Error updating order status:",t)}},L=e=>{switch(e){case"confirmed":return"success";case"pending":return"warning";case"completed":return"primary";case"cancelled":return"error";default:return"default"}};return C?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):a.jsx("div",{className:"min-h-screen bg-gray-50",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Order Management"}),a.jsx("p",{className:"text-gray-600 mt-2",children:"View and manage all equipment rental orders"})]}),a.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row gap-4",children:[a.jsx("div",{className:"flex-1",children:a.jsx(m,{placeholder:"Search orders...",value:g,onChange:e=>N(e.target.value),icon:a.jsx(h,{size:20})})}),a.jsx("div",{className:"sm:w-48",children:a.jsxs("select",{value:v,onChange:e=>b(e.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:ring-primary-500 focus:border-primary-500",children:[a.jsx("option",{value:"all",children:"All Statuses"}),a.jsx("option",{value:"pending",children:"Pending"}),a.jsx("option",{value:"confirmed",children:"Confirmed"}),a.jsx("option",{value:"completed",children:"Completed"}),a.jsx("option",{value:"cancelled",children:"Cancelled"})]})})]}),a.jsxs(n,{children:[a.jsx(c,{children:a.jsxs(d,{children:["Orders (",f.length,")"]})}),a.jsx(o,{children:f.length>0?a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-gray-200",children:[a.jsx("th",{className:"text-left py-3 px-4",children:"Customer"}),a.jsx("th",{className:"text-left py-3 px-4",children:"Equipment"}),a.jsx("th",{className:"text-left py-3 px-4",children:"Duration"}),a.jsx("th",{className:"text-left py-3 px-4",children:"Dates"}),a.jsx("th",{className:"text-left py-3 px-4",children:"Total"}),a.jsx("th",{className:"text-left py-3 px-4",children:"Status"}),a.jsx("th",{className:"text-right py-3 px-4",children:"Actions"})]})}),a.jsx("tbody",{children:f.map(e=>{var s;return a.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:e.customer_name}),a.jsx("div",{className:"text-gray-500 text-xs",children:e.customer_email})]})}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("div",{className:"font-medium",children:(null==(s=e.equipment)?void 0:s.name)||"N/A"})}),a.jsx("td",{className:"py-3 px-4",children:e.duration}),a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{className:"text-xs",children:[a.jsxs("div",{children:["Rent: ",r(e.rent_date)]}),a.jsxs("div",{children:["Return: ",r(e.return_date)]})]})}),a.jsx("td",{className:"py-3 px-4 font-medium",children:t(e.total_cost)}),a.jsx("td",{className:"py-3 px-4",children:a.jsx(x,{variant:L(e.status),children:e.status})}),a.jsx("td",{className:"py-3 px-4 text-right",children:a.jsxs("div",{className:"flex justify-end space-x-1",children:["pending"===e.status&&a.jsx(l,{size:"sm",variant:"ghost",onClick:()=>z(e.id,"confirmed"),icon:a.jsx(u,{size:16}),title:"Confirm Order"}),"confirmed"===e.status&&a.jsx(l,{size:"sm",variant:"ghost",onClick:()=>z(e.id,"completed"),icon:a.jsx(p,{size:16}),title:"Mark as Completed"})]})})]},e.id)})})]})}):a.jsxs("div",{className:"text-center py-12",children:[a.jsx(p,{size:48,className:"mx-auto text-gray-400 mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No orders found"}),a.jsx("p",{className:"text-gray-600",children:g||"all"!==v?"Try adjusting your search or filters":"No orders have been created yet"})]})})]})]})})};export{j as default};
