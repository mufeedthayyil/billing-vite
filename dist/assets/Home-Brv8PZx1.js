import{c as e,u as s,j as a,f as r,B as t,a as l,i,e as n}from"./index-C3XHl7PL.js";import{r as c}from"./vendor-Df-ZC91g.js";import{C as o,a as m,b as d,c as x}from"./Card-DqtHJJQK.js";import{P as h}from"./plus-BbCtciMK.js";import{I as u}from"./Input-BAszwOqE.js";import{A as p}from"./Alert-D6Ms3eos.js";import{S as g}from"./search-DRYqwqby.js";import"./router-BW3qfFDS.js";import"./supabase-C0-OQ20D.js";
/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j=e("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),y=e("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),f=e("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),v=e("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),N=e("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),b=({equipment:e})=>{const{addToCart:l}=s(),[i,n]=c.useState("24hr"),[u,p]=c.useState((new Date).toISOString().split("T")[0]),[g,j]=c.useState(!1),v="12hr"===i?e.rate_12hr:e.rate_24hr;return a.jsxs(o,{className:"h-full hover:shadow-lg transition-shadow",children:[a.jsx("div",{className:"aspect-w-16 aspect-h-9",children:a.jsx("img",{src:e.image_url||"https://images.pexels.com/photos/90946/pexels-photo-90946.jpeg?auto=compress&cs=tinysrgb&w=400",alt:e.name,className:"w-full h-48 object-cover rounded-t-lg"})}),a.jsxs(m,{children:[a.jsx(d,{className:"text-lg",children:e.name}),a.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:e.description})]}),a.jsxs(x,{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("div",{className:"text-center p-2 bg-gray-50 rounded-md",children:[a.jsxs("div",{className:"flex items-center justify-center mb-1",children:[a.jsx(f,{size:16,className:"mr-1 text-gray-500"}),a.jsx("span",{className:"text-xs text-gray-500",children:"12 Hours"})]}),a.jsx("div",{className:"font-semibold text-primary-600",children:r(e.rate_12hr)})]}),a.jsxs("div",{className:"text-center p-2 bg-gray-50 rounded-md",children:[a.jsxs("div",{className:"flex items-center justify-center mb-1",children:[a.jsx(y,{size:16,className:"mr-1 text-gray-500"}),a.jsx("span",{className:"text-xs text-gray-500",children:"24 Hours"})]}),a.jsx("div",{className:"font-semibold text-primary-600",children:r(e.rate_24hr)})]})]}),g?a.jsxs("div",{className:"space-y-3 p-3 bg-gray-50 rounded-md",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rental Duration"}),a.jsxs("select",{value:i,onChange:e=>n(e.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:ring-primary-500 focus:border-primary-500 text-sm",children:[a.jsxs("option",{value:"12hr",children:["12 Hours - ",r(e.rate_12hr)]}),a.jsxs("option",{value:"24hr",children:["24 Hours - ",r(e.rate_24hr)]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rent Date"}),a.jsx("input",{type:"date",value:u,onChange:e=>p(e.target.value),min:(new Date).toISOString().split("T")[0],className:"w-full rounded-md border-gray-300 shadow-sm focus:ring-primary-500 focus:border-primary-500 text-sm"})]}),a.jsxs("div",{className:"text-center py-2 border-t border-gray-200",children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Total Cost"}),a.jsx("div",{className:"text-lg font-bold text-primary-600",children:r(v)})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx(t,{variant:"outline",size:"sm",fullWidth:!0,onClick:()=>j(!1),children:"Cancel"}),a.jsx(t,{size:"sm",fullWidth:!0,onClick:()=>{const s=new Date(u),a=new Date(s);"12hr"===i?a.setHours(a.getHours()+12):a.setDate(a.getDate()+1),l(e,i,u,a.toISOString().split("T")[0]),j(!1)},icon:a.jsx(h,{size:16}),children:"Add to Cart"})]})]}):a.jsx(t,{fullWidth:!0,onClick:()=>j(!0),icon:a.jsx(h,{size:16}),children:"Add to Cart"})]})]})},w=()=>{const{connectionStatus:e}=l(),[s,r]=c.useState([]),[o,m]=c.useState([]),[d,x]=c.useState(""),[h,y]=c.useState("all"),[f,w]=c.useState(!0),[C,k]=c.useState(null),[S,q]=c.useState(!1);c.useEffect(()=>{A()},[]),c.useEffect(()=>{_()},[s,d,h]);const A=async()=>{try{w(!0),k(null),console.log("🏠 Home: Loading equipment...");const e=await i();if(!e.success)throw new Error(e.message);const s=await n.getAll();console.log(`🏠 Home: Loaded ${s.length} equipment items`),r(s)}catch(e){console.error("🏠 Home: Error loading equipment:",e),k(e.message||"Failed to load equipment. Please try again.")}finally{w(!1)}},L=async()=>{q(!0),await A(),q(!1)},_=()=>{let e=s;d&&(e=e.filter(e=>{var s;return e.name.toLowerCase().includes(d.toLowerCase())||(null==(s=e.description)?void 0:s.toLowerCase().includes(d.toLowerCase()))})),"all"!==h&&(e=e.filter(e=>{const s=Math.max(e.rate_12hr,e.rate_24hr);switch(h){case"low":return s<=1e3;case"medium":return s>1e3&&s<=3e3;case"high":return s>3e3;default:return!0}})),m(e)};return e&&!e.success?a.jsx("div",{className:"min-h-screen bg-gray-50",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsx(p,{variant:"error",className:"mb-6",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(j,{size:20,className:"mr-3 mt-0.5 flex-shrink-0"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-medium",children:"Database Connection Error"}),a.jsx("p",{className:"text-sm mt-1",children:e.message}),a.jsx("p",{className:"text-sm mt-2 font-medium",children:"Setup Instructions:"}),a.jsxs("ol",{className:"text-sm mt-1 ml-4 list-decimal space-y-1",children:[a.jsxs("li",{children:["Create a Supabase project at ",a.jsx("a",{href:"https://supabase.com",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline",children:"supabase.com"})]}),a.jsx("li",{children:"Copy your project URL and anon key from Settings → API"}),a.jsx("li",{children:"Add them to your .env file as VITE_SUPABASE_URL and VITE_SUPABASE_ANON_KEY"}),a.jsx("li",{children:"Run the migration file in your Supabase SQL editor"})]})]})]})}),a.jsx(t,{onClick:L,isLoading:S,icon:a.jsx(N,{size:16}),children:S?"Testing Connection...":"Retry Connection"})]})}):f?a.jsx("div",{className:"min-h-screen bg-gray-50",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),a.jsx("p",{className:"mt-4 text-gray-600",children:"Loading equipment..."})]})})}):C?a.jsx("div",{className:"min-h-screen bg-gray-50",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsx(p,{variant:"error",className:"mb-6",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(j,{size:20,className:"mr-3 mt-0.5 flex-shrink-0"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-medium",children:"Error Loading Equipment"}),a.jsx("p",{className:"text-sm mt-1",children:C})]})]})}),a.jsx(t,{onClick:L,isLoading:S,icon:a.jsx(N,{size:16}),children:S?"Retrying...":"Try Again"})]})}):a.jsx("div",{className:"min-h-screen bg-gray-50",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Professional Camera Equipment Rental"}),a.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Rent high-quality cameras, lenses, and accessories with flexible 12-hour and 24-hour rates. Perfect for photographers, videographers, and content creators."})]}),e&&e.success&&a.jsx(p,{variant:"success",className:"mb-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),a.jsxs("span",{className:"text-sm",children:["Database connected successfully • ",s.length," items available"]})]})}),a.jsxs("div",{className:"mb-8 flex flex-col sm:flex-row gap-4",children:[a.jsx("div",{className:"flex-1",children:a.jsx(u,{placeholder:"Search equipment...",value:d,onChange:e=>x(e.target.value),icon:a.jsx(g,{size:20})})}),a.jsx("div",{className:"sm:w-48",children:a.jsxs("select",{value:h,onChange:e=>y(e.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:ring-primary-500 focus:border-primary-500",children:[a.jsx("option",{value:"all",children:"All Prices"}),a.jsx("option",{value:"low",children:"Under ₹1,000"}),a.jsx("option",{value:"medium",children:"₹1,000 - ₹3,000"}),a.jsx("option",{value:"high",children:"Above ₹3,000"})]})})]}),a.jsx("div",{className:"mb-6",children:a.jsxs("p",{className:"text-gray-600",children:["Showing ",o.length," of ",s.length," items",d&&` for "${d}"`,"all"!==h&&` in ${h} price range`]})}),o.length>0?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:o.map(e=>a.jsx(b,{equipment:e},e.id))}):a.jsxs("div",{className:"text-center py-12",children:[a.jsx(v,{size:48,className:"mx-auto text-gray-400 mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No equipment found"}),a.jsx("p",{className:"text-gray-600 mb-4",children:d||"all"!==h?"Try adjusting your search or filters":"No equipment available at the moment"}),(d||"all"!==h)&&a.jsx(t,{variant:"outline",onClick:()=>{x(""),y("all")},children:"Clear Filters"}),0===s.length&&a.jsx(t,{onClick:L,isLoading:S,icon:a.jsx(N,{size:16}),className:"ml-2",children:S?"Reloading...":"Reload Equipment"})]})]})})};
/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */export{w as default};
