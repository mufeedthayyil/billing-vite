import{c as e,e as s,d as a,s as t,j as r,B as l,f as i}from"./index-C3XHl7PL.js";import{r as n}from"./vendor-Df-ZC91g.js";import{C as c,a as d,b as m,c as o}from"./Card-DqtHJJQK.js";import{I as x}from"./Input-BAszwOqE.js";import{B as h}from"./Badge-CewC6kjJ.js";import{A as p}from"./Alert-D6Ms3eos.js";import{P as u}from"./package-uccDexwJ.js";import{U as g}from"./users-DA7jsRNu.js";import{P as j}from"./plus-BbCtciMK.js";import{T as y}from"./trash-2-rN2tfj1E.js";import"./router-BW3qfFDS.js";import"./supabase-C0-OQ20D.js";
/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b=e("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),N=e("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]),v=()=>{const[e,v]=n.useState("equipment"),[f,w]=n.useState([]),[q,_]=n.useState([]),[k,C]=n.useState([]),[S,E]=n.useState(!0),[A,z]=n.useState(null),[F,M]=n.useState(null),[R,D]=n.useState(!1),[U,P]=n.useState(null),[H,I]=n.useState({name:"",image_url:"",description:"",rate_12hr:0,rate_24hr:0,available:!0});n.useEffect(()=>{L()},[]);const L=async()=>{try{E(!0);const[e,r,l]=await Promise.all([s.getAll(),a.getAll(),t.getAll()]);w(e),_(r),C(l)}catch(e){z("Failed to load data"),console.error("Error loading admin data:",e)}finally{E(!1)}},B=e=>{M(e),setTimeout(()=>M(null),5e3)},T=e=>{z(e),setTimeout(()=>z(null),5e3)},J=async(e,s)=>{try{await t.update(e,{status:s}),B("Suggestion status updated"),L()}catch(a){T("Failed to update suggestion"),console.error("Error updating suggestion:",a)}};return S?r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):r.jsx("div",{className:"min-h-screen bg-gray-50",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Panel"}),r.jsx("p",{className:"text-gray-600 mt-2",children:"Manage equipment, users, and suggestions"})]}),F&&r.jsx(p,{variant:"success",className:"mb-6",onClose:()=>M(null),children:F}),A&&r.jsx(p,{variant:"error",className:"mb-6",onClose:()=>z(null),children:A}),r.jsx("div",{className:"mb-6",children:r.jsxs("nav",{className:"flex space-x-8",children:[r.jsxs("button",{onClick:()=>v("equipment"),className:"py-2 px-1 border-b-2 font-medium text-sm "+("equipment"===e?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700"),children:[r.jsx(u,{className:"inline-block w-4 h-4 mr-2"}),"Equipment (",f.length,")"]}),r.jsxs("button",{onClick:()=>v("users"),className:"py-2 px-1 border-b-2 font-medium text-sm "+("users"===e?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700"),children:[r.jsx(g,{className:"inline-block w-4 h-4 mr-2"}),"Users (",q.length,")"]}),r.jsxs("button",{onClick:()=>v("suggestions"),className:"py-2 px-1 border-b-2 font-medium text-sm "+("suggestions"===e?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700"),children:[r.jsx(b,{className:"inline-block w-4 h-4 mr-2"}),"Suggestions (",k.length,")"]})]})}),"equipment"===e&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h2",{className:"text-xl font-semibold",children:"Equipment Management"}),r.jsx(l,{onClick:()=>D(!0),icon:r.jsx(j,{size:16}),children:"Add Equipment"})]}),R&&r.jsxs(c,{children:[r.jsx(d,{children:r.jsx(m,{children:U?"Edit Equipment":"Add New Equipment"})}),r.jsx(o,{children:r.jsxs("form",{onSubmit:async e=>{e.preventDefault();try{U?(await s.update(U.id,H),B("Equipment updated successfully")):(await s.create(H),B("Equipment created successfully")),D(!1),P(null),I({name:"",image_url:"",description:"",rate_12hr:0,rate_24hr:0,available:!0}),L()}catch(a){T("Failed to save equipment"),console.error("Error saving equipment:",a)}},className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(x,{label:"Equipment Name",value:H.name,onChange:e=>I(s=>({...s,name:e.target.value})),required:!0}),r.jsx(x,{label:"Image URL",value:H.image_url,onChange:e=>I(s=>({...s,image_url:e.target.value})),placeholder:"https://example.com/image.jpg"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),r.jsx("textarea",{value:H.description,onChange:e=>I(s=>({...s,description:e.target.value})),className:"w-full rounded-md border-gray-300 shadow-sm focus:ring-primary-500 focus:border-primary-500",rows:3})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(x,{label:"12-Hour Rate (₹)",type:"number",value:H.rate_12hr.toString(),onChange:e=>I(s=>({...s,rate_12hr:parseFloat(e.target.value)||0})),required:!0,min:"0",step:"100"}),r.jsx(x,{label:"24-Hour Rate (₹)",type:"number",value:H.rate_24hr.toString(),onChange:e=>I(s=>({...s,rate_24hr:parseFloat(e.target.value)||0})),required:!0,min:"0",step:"100"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",id:"available",checked:H.available,onChange:e=>I(s=>({...s,available:e.target.checked})),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),r.jsx("label",{htmlFor:"available",className:"ml-2 block text-sm text-gray-900",children:"Available for rent"})]}),r.jsxs("div",{className:"flex space-x-3",children:[r.jsxs(l,{type:"submit",children:[U?"Update":"Create"," Equipment"]}),r.jsx(l,{type:"button",variant:"outline",onClick:()=>{D(!1),P(null)},children:"Cancel"})]})]})})]}),r.jsx(c,{children:r.jsx(o,{children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-gray-200",children:[r.jsx("th",{className:"text-left py-3 px-4",children:"Equipment"}),r.jsx("th",{className:"text-left py-3 px-4",children:"12hr Rate"}),r.jsx("th",{className:"text-left py-3 px-4",children:"24hr Rate"}),r.jsx("th",{className:"text-left py-3 px-4",children:"Status"}),r.jsx("th",{className:"text-right py-3 px-4",children:"Actions"})]})}),r.jsx("tbody",{children:f.map(e=>r.jsxs("tr",{className:"border-b border-gray-100",children:[r.jsx("td",{className:"py-3 px-4",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("img",{src:e.image_url||"https://images.pexels.com/photos/90946/pexels-photo-90946.jpeg?auto=compress&cs=tinysrgb&w=400",alt:e.name,className:"w-10 h-10 object-cover rounded"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:e.name}),r.jsx("div",{className:"text-gray-500 text-xs",children:e.description})]})]})}),r.jsx("td",{className:"py-3 px-4",children:i(e.rate_12hr)}),r.jsx("td",{className:"py-3 px-4",children:i(e.rate_24hr)}),r.jsx("td",{className:"py-3 px-4",children:r.jsx(h,{variant:e.available?"success":"error",children:e.available?"Available":"Unavailable"})}),r.jsx("td",{className:"py-3 px-4 text-right",children:r.jsxs("div",{className:"flex justify-end space-x-1",children:[r.jsx(l,{size:"sm",variant:"ghost",onClick:()=>(e=>{P(e),I({name:e.name,image_url:e.image_url||"",description:e.description||"",rate_12hr:e.rate_12hr,rate_24hr:e.rate_24hr,available:e.available}),D(!0)})(e),icon:r.jsx(N,{size:16})}),r.jsx(l,{size:"sm",variant:"ghost",className:"text-red-600 hover:text-red-700",onClick:()=>(async e=>{if(confirm("Are you sure you want to delete this equipment?"))try{await s.delete(e),B("Equipment deleted successfully"),L()}catch(a){T("Failed to delete equipment"),console.error("Error deleting equipment:",a)}})(e.id),icon:r.jsx(y,{size:16})})]})})]},e.id))})]})})})})]}),"users"===e&&r.jsxs("div",{className:"space-y-6",children:[r.jsx("h2",{className:"text-xl font-semibold",children:"User Management"}),r.jsx(c,{children:r.jsx(o,{children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-gray-200",children:[r.jsx("th",{className:"text-left py-3 px-4",children:"Name"}),r.jsx("th",{className:"text-left py-3 px-4",children:"Email"}),r.jsx("th",{className:"text-left py-3 px-4",children:"Role"}),r.jsx("th",{className:"text-left py-3 px-4",children:"Joined"})]})}),r.jsx("tbody",{children:q.map(e=>r.jsxs("tr",{className:"border-b border-gray-100",children:[r.jsx("td",{className:"py-3 px-4 font-medium",children:e.name}),r.jsx("td",{className:"py-3 px-4",children:e.email}),r.jsx("td",{className:"py-3 px-4",children:r.jsx(h,{variant:"admin"===e.role?"error":"staff"===e.role?"warning":"default",children:e.role})}),r.jsx("td",{className:"py-3 px-4",children:e.created_at?new Date(e.created_at).toLocaleDateString():"N/A"})]},e.id))})]})})})})]}),"suggestions"===e&&r.jsxs("div",{className:"space-y-6",children:[r.jsx("h2",{className:"text-xl font-semibold",children:"Equipment Suggestions"}),r.jsxs("div",{className:"grid gap-4",children:[k.map(e=>r.jsx(c,{children:r.jsx(o,{className:"p-6",children:r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[r.jsx(h,{variant:"implemented"===e.status?"success":"reviewed"===e.status?"warning":"default",children:e.status}),r.jsxs("span",{className:"text-sm text-gray-500",children:["by ",e.suggested_by]}),r.jsx("span",{className:"text-sm text-gray-500",children:e.created_at?new Date(e.created_at).toLocaleDateString():""})]}),r.jsx("p",{className:"text-gray-900",children:e.suggestion_text})]}),r.jsxs("div",{className:"flex space-x-2 ml-4",children:["pending"===e.status&&r.jsxs(r.Fragment,{children:[r.jsx(l,{size:"sm",variant:"outline",onClick:()=>J(e.id,"reviewed"),children:"Mark Reviewed"}),r.jsx(l,{size:"sm",onClick:()=>J(e.id,"implemented"),children:"Mark Implemented"})]}),r.jsx(l,{size:"sm",variant:"ghost",className:"text-red-600 hover:text-red-700",onClick:()=>(async e=>{if(confirm("Are you sure you want to delete this suggestion?"))try{await t.delete(e),B("Suggestion deleted successfully"),L()}catch(s){T("Failed to delete suggestion"),console.error("Error deleting suggestion:",s)}})(e.id),icon:r.jsx(y,{size:16})})]})]})})},e.id)),0===k.length&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx(b,{size:48,className:"mx-auto text-gray-400 mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No suggestions yet"}),r.jsx("p",{className:"text-gray-600",children:"Equipment suggestions from users will appear here"})]})]})]})]})})};
/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */export{v as default};
