import{a as e,j as s,C as a,U as t,B as r}from"./index-C3XHl7PL.js";import{r as l}from"./vendor-Df-ZC91g.js";import{u as i,L as o}from"./router-BW3qfFDS.js";import{I as n}from"./Input-BAszwOqE.js";import{A as m}from"./Alert-D6Ms3eos.js";import{M as c,L as d}from"./mail-RPAkcuJK.js";import"./supabase-C0-OQ20D.js";const u=()=>{const{register:u,isAuthenticated:x}=e(),p=i(),[h,j]=l.useState(""),[g,f]=l.useState(""),[y,w]=l.useState(""),[b,v]=l.useState(""),[N,C]=l.useState(!1),[S,q]=l.useState(""),[A,P]=l.useState("");l.useEffect(()=>{x&&p("/")},[x,p]);return s.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[s.jsx("div",{className:"flex justify-center",children:s.jsx(a,{size:48,className:"text-primary-600"})}),s.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Join LensPro Rentals"}),s.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Create your account to start renting professional equipment"})]}),s.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:s.jsxs("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[S&&s.jsx(m,{variant:"error",className:"mb-4",onClose:()=>q(""),children:S}),A&&s.jsx(m,{variant:"success",className:"mb-4",onClose:()=>P(""),children:A}),s.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),q(""),P(""),h.trim()?g.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(g)?y?y.length<6?(q("Password must be at least 6 characters long"),0):y===b||(q("Passwords do not match"),0):(q("Password is required"),0):(q("Please enter a valid email address"),0):(q("Email is required"),0):(q("Name is required"),0)){C(!0);try{const e=await u(h.trim(),g.trim(),y);e.success?(e.error?P(e.error):P("Registration successful! You can now sign in."),j(""),f(""),w(""),v("")):q(e.error||"Registration failed")}catch(s){q(s.message||"An unexpected error occurred. Please try again."),console.error("Registration error:",s)}finally{C(!1)}}},className:"space-y-6",children:[s.jsx(n,{id:"name",label:"Full name",type:"text",value:h,onChange:e=>j(e.target.value),required:!0,autoComplete:"name",placeholder:"Enter your full name",icon:s.jsx(t,{className:"h-5 w-5 text-gray-400"}),disabled:N}),s.jsx(n,{id:"email",label:"Email address",type:"email",value:g,onChange:e=>f(e.target.value),required:!0,autoComplete:"email",placeholder:"Enter your email",icon:s.jsx(c,{className:"h-5 w-5 text-gray-400"}),disabled:N}),s.jsx(n,{id:"password",label:"Password",type:"password",value:y,onChange:e=>w(e.target.value),required:!0,autoComplete:"new-password",placeholder:"Create a password (min 6 characters)",icon:s.jsx(d,{className:"h-5 w-5 text-gray-400"}),disabled:N}),s.jsx(n,{id:"confirm-password",label:"Confirm password",type:"password",value:b,onChange:e=>v(e.target.value),required:!0,autoComplete:"new-password",placeholder:"Confirm your password",icon:s.jsx(d,{className:"h-5 w-5 text-gray-400"}),disabled:N}),s.jsxs("div",{className:"text-xs text-gray-500 bg-blue-50 p-3 rounded-md",children:[s.jsx("p",{className:"font-medium text-blue-900 mb-1",children:"Account Information:"}),s.jsx("p",{children:"• All new accounts are created as customer accounts"}),s.jsx("p",{children:"• Staff access is granted by administrators"}),s.jsx("p",{children:"• Your account will be ready to use immediately"})]}),s.jsx(r,{type:"submit",fullWidth:!0,isLoading:N,disabled:N||!h.trim()||!g||!y||!b,children:N?"Creating account...":"Create account"})]}),s.jsxs("div",{className:"mt-6 text-center",children:[s.jsx("span",{className:"text-gray-600",children:"Already have an account?"})," ",s.jsx(o,{to:"/login",className:"font-medium text-primary-600 hover:text-primary-500 transition-colors",children:"Sign in"})]})]})})]})};export{u as default};
